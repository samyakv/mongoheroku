<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SignUp Form - MongoDB</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <link rel="stylesheet" type="text/css" href="styles.css">
</head>

<body>

    <div class="container">
        <div class="row">
            <div class="col-md-3">

            </div>
            <div class="col-md-6 main">
                <script type="text/javascript">var submitted = false;</script>
                <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"
                    onload="if(submitted) {window.location='teamup.html';}"></iframe>

                <form action="/sign_up" method="POST" target="hidden_iframe" onsubmit="showref()" id="form">
                    <h2>SignUp Form</h2>
                    <label for="name">name</label>
                    <input type="text" class="box" id="name" name="name" placeholder="Name" required />
                    <br>
                    <label for="email">mail</label>
                    <input type="text" class="box" id="email" name="email" placeholder="Email" required />
                    <br>
                    <label for="demo">Your referal</label>
                    <input type="text" class="box" id="demo" name="demo" placeholder="" value="" required />
                    <br>
                    <label for="newdemo">have referal?</label>
                    <input type="text" class="box" id="newdemo" name="newdemo" placeholder="" value="" />
                    <!-- <input type="text" class="box" id="phno" name="phno" placeholder="Mobile" required />
                    <br>
                    <input type="text" class="box" id="password" name="password" placeholder="Password" required />
                    <br> -->

                    <input type="submit" value="Submit" id="submit" />
                </form>


                <div id="demoshow"></div>
            </div>
            <div class="col-md-3">
            </div>
        </div>
    </div>

    <script>
        function randomString(length, chars) {
            var result = '';
            for (var i = length; i > 0; --i) result += chars[Math.round(Math.random() * (chars.length - 1))];
            return result;
        }
        document.getElementById("demo").value = randomString(9, '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ');

        function showref() {
            var name = document.getElementById("name").value;
            var ref = document.getElementById("demo").value;
            var form = document.getElementById("form");
            var initlink = "localhost:3000/index.html?newdemo=";
            form.style.display = "none";

            document.getElementById("demoshow").innerHTML = "Hi " + name + "this is your referal code: " + ref + "." + "use this link to invite friends: " +"<a href='"+initlink+ref+"'>ff</a>" ;
        }

        // const hash = '?name=some_text&email=more%20text';
        // const example = "http://example.com/" + hash;

        (new URL(window.location.href)).searchParams.forEach((x, y) =>
            document.getElementById(y).value = x);
    </script>




<!-- <script>


function validateEmailAccessibility(email){

return mydb.users.findOne({email: email}).then(function(result){
     return result !== null;
});
}
     validateEmailAccessibility(email).then(function(valid) {
        if (valid) {
          alert("Email is valid");
        } else {
          alert("Email already used");
        }
      });
</script> -->






</body>

</html>